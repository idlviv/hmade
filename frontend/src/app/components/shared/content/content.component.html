<div id="toolbar" class="mat-elevation-z4" fxLayout="row" fxLayoutAlign="center center">
  <div class="logo" fxFlex.lt-md="80" fxFlex="30" fxLayoutAlign="start center">
    <a href="">
      <img src="./assets/images/hmade_logo_light.svg" height="36px" alt="HandMADE logo">
    </a>
  </div>

  <div fxShow="true" fxHide.lt-md="true" fxFlex="40" fxLayoutAlign="center center">
    <a *ngFor="let mainMenuCommonItem of mainMenuCommonItems" class="link" [routerLink]="['/', mainMenuCommonItem._id, 'ch']"
      [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: false}">
      <span class="type1">{{mainMenuCommonItem.name}}</span>
    </a>
  </div>

  <div fxShow="true" fxHide.lt-md="true" fxFlex="30" fxLayoutAlign="end center">
    <a *ngIf="allowTo('guest')" class="link" [matMenuTriggerFor]="settingsMenu" #settingsMenuTrigger="matMenuTrigger" (mouseover)="onSettingsMenuMouseover()">
      <span class="type2">
        <mat-icon class="mat-icon-aligner">settings</mat-icon>{{user.name}} {{user.surname}}
      </span>

    </a>

    <mat-menu #settingsMenu="matMenu" xPosition="after" yPosition="above" [overlapTrigger]="false">
      <span (mouseleave)="onSettingsMenuMouseleave()">
        <a *ngIf="allowTo('guest')" mat-menu-item [routerLink]="['/user/profile']" [routerLinkActive]="['accent']"
          [routerLinkActiveOptions]="{exact: true}">
          <mat-icon>account_circle</mat-icon><span>Профіль</span>
        </a>
        <a *ngIf="allowTo('manager')" mat-menu-item [routerLink]="['/dashboard']"
          [routerLinkActive]="['accent']" [routerLinkActiveOptions]="{exact: true}">
          <mat-icon>settings</mat-icon><span>Dashboard</span>
        </a>
      </span>
    </mat-menu>

    <a *ngIf="allowTo('notUser')" class="link" [routerLinkActive]="['active']" [routerLinkActiveOptions]="{exact: true}"
      [routerLink]="['/user/login']"><span class="type1">Вхід</span></a>
    <a *ngIf="allowTo('guest')" class="link" (click)="userLogout()"><span class="type2">Вихід</span></a>
  </div>

  <div class="menu-button" fxShow="true" fxHide.gt-sm="true" fxFlex="20" fxLayoutAlign="end center">
    <button mat-button (click)="sidenav.toggle()">
      <mat-icon *ngIf="sidenav.opened">format_indent_increase</mat-icon>
      <mat-icon *ngIf="!sidenav.opened">menu</mat-icon>
    </button>
  </div>
  <!-- </mat-toolbar-row> -->
  <!-- </mat-toolbar> -->
</div>
<!-- <div class="toolbar" fxLayoutAlign="center end">
    <div fxShow="true" fxHide.lt-md="true" fxLayout="row" fxLayoutAlign="center">
      <a *ngFor="let mainMenuCommonItem of mainMenuCommonItems" mat-button
          [routerLink]="['/', mainMenuCommonItem._id, 'ch']"
          [routerLinkActive]="['primary-light']" [routerLinkActiveOptions]="{exact: true}">
        {{mainMenuCommonItem.name}}
      </a>
    </div>
</div> -->

<mat-sidenav-container fxFlexFill>
  <mat-sidenav #sidenav fxLayout="column" position="end" class="sidenav mat-elevation-z4" role="navigation" mode="side">
    <div fxLayout="column">
      <mat-nav-list>
        <mat-list-item *ngFor="let mainMenuCommonItem of mainMenuCommonItems">
          <a matLine [routerLinkActive]="['muted']" [routerLinkActiveOptions]="{exact: true}" [routerLink]="['/', mainMenuCommonItem._id, 'ch']"
            (click)="sidenav.toggle()">
            {{mainMenuCommonItem.name}}
          </a>
        </mat-list-item>

        <mat-expansion-panel *ngIf="allowTo('guest')" class="mat-elevation-z0">
          <mat-expansion-panel-header class="sidenav-expansion-panel">
            <!-- <mat-panel-title> -->
              <!-- <mat-list-item> -->
                
                <span matLine><span><mat-icon class="mat-icon-aligner">settings</mat-icon>{{user.name}} {{user.surname}}</span></span>
              <!-- </mat-list-item> -->
            <!-- </mat-panel-title> -->

          </mat-expansion-panel-header>
          <mat-list-item *ngIf="allowTo('guest')">
            <mat-icon matListIcon>account_circle</mat-icon>
            <a matLine [routerLink]="['/user/profile']" [routerLinkActive]="['muted']" [routerLinkActiveOptions]="{exact: true}"
              (click)="sidenav.toggle()">
              Профіль</a>
          </mat-list-item>
          <mat-list-item *ngIf="allowTo('manager')">
            <mat-icon matListIcon>settings</mat-icon>
            <a matLine [routerLink]="['/dashboard']" [routerLinkActive]="['muted']" [routerLinkActiveOptions]="{exact: true}"
              (click)="sidenav.toggle()">
              Dashboard</a>
          </mat-list-item>
        </mat-expansion-panel>

        <mat-list-item *ngIf="allowTo('notUser')">
          <a matLine [routerLinkActive]="['muted']" [routerLinkActiveOptions]="{exact: true}" [routerLink]="['/user/login']"
            (click)="sidenav.toggle()">Вхід</a>
        </mat-list-item>
        <mat-list-item *ngIf="allowTo('guest')">
          <a matLine (click)="userLocalLogout()" (click)="sidenav.toggle()">
            Вихід
          </a>
          <mat-icon matListIcon>exit_to_app</mat-icon>
        </mat-list-item>
      </mat-nav-list>
    </div>
  </mat-sidenav>
  <mat-sidenav-content>
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>